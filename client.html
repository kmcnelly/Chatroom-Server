<!DOCTYPE html>
<html>
   <head>
      <!-- Style Sheet -->
      <link rel="stylesheet" href="style.css">


      <!-- JQuery -->
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js" type="text/javascript"></script>

     <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
     <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

     <!-- Socket.io -->
      <script src="/socket.io/socket.io.js"></script>
      <script type ="text/javascript">

      var socketio = io.connect();
      socketio.on("message_to_client",function(data) {
         //Append an HR thematic break and the escaped HTML of the new message
         document.getElementById("chatlog").appendChild(document.createElement("hr"));
         document.getElementById("chatlog").appendChild(document.createTextNode(data['message']));
      });

      
      function sendMessage(){
         var msg = document.getElementById("message_input").value;

         if(msg != ""){
            socketio.emit("message_to_server", {message:msg});
         }

         document.getElementById("message_input").value = "";

      }

      //return key for sending message
      $(document).keypress(function(event){
          var keycode = (event.keyCode ? event.keyCode : event.which);
          if(keycode == '13'){
              sendMessage();   
         }
      });


      </script>


   </head>

   <body>

      <h1>akIRC - Chatroom</h1>

      <input type=text" id="message_input"/>
      <button onclick="sendMessage()">send</button>
      <div id="chatlog">
         
      </div>
   </body>
</html>